<!doctype html>
<!-- Reusable alert component using the project's success design. -->
<div th:fragment="alert(type='success', message='Mensaje', duration=3000)">
  <style>
    .glass-overlay { background-color: rgba(0, 0, 0, 0.36); backdrop-filter: blur(4px); -webkit-backdrop-filter: blur(4px);} 
    .glass-card { background: rgba(255,255,255,0.95); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.3); border-radius: 1rem; padding:1rem 1.25rem; box-shadow: 0 24px 60px rgba(2,6,23,0.18); }
    #global-success { opacity: 0; transform: translateY(8px) scale(0.99); transition: opacity 220ms cubic-bezier(.2,.8,.2,1), transform 220ms cubic-bezier(.2,.8,.2,1); }
    #global-success.show { opacity: 1; transform: translateY(0) scale(1); }
    .success-icon { width:64px; height:64px; border-radius:9999px; display:flex; align-items:center; justify-content:center; background:#ecfdf5; color:#16a34a; }
    .success-title { font-weight:800; text-transform:uppercase; font-size:0.85rem; }
    .success-body { color:#64748b; font-size:0.9rem; }
  </style>

  <div id="global-success" class="fixed inset-0 z-[110] flex items-center justify-center glass-overlay">
    <div class="glass-card max-w-sm w-full mx-4 p-8 rounded-2xl shadow-2xl flex flex-col items-center gap-6 text-center">
      <div class="mb-2 flex justify-center">
        <div class="success-icon">
          <span class="material-symbols-outlined" style="font-size:36px">check_circle</span>
        </div>
      </div>
      <div class="space-y-2">
        <h3 class="success-title">Acci√≥n completada</h3>
        <p id="global-success-message" class="success-body" th:text="${message}">Mensaje</p>
      </div>
      <div class="flex items-center gap-1.5 opacity-40 pt-2">
        <div class="size-1 bg-primary rounded-full"></div>
        <span class="text-[8px] font-extrabold uppercase tracking-[0.2em] text-slate-400">Protocolo seguro</span>
      </div>
    </div>
  </div>

  <script>
    (function(){
      var root = document.getElementById('global-success');
      if(!root) return;
      var msgEl = document.getElementById('global-success-message');
      var duration = parseInt(root.getAttribute('data-duration') || '3000', 10);
      function show(){ root.classList.add('show'); }
      function hide(){ root.classList.remove('show'); }
      // show automatically if server provided message
      var msg = msgEl ? msgEl.innerText.trim() : '';
      if(msg){ show(); setTimeout(hide, duration); }

      // expose API
      window.showAlert = function(opts){
        try{
          opts = opts || {};
          var m = opts.message || '';
          var d = typeof opts.duration === 'number' ? opts.duration : duration;
          if(msgEl) msgEl.textContent = m;
          show();
          if(d>0) setTimeout(hide, d);
        }catch(e){console.error(e)}
      };
    })();
  </script>
</div>
